0x52

high

# Adversary can permanently break reward distribution for percentage tier bounties by funding bounty then refunding after competition closes

## Summary

When closeCompetition is called for TieredPercentageBountyV1 it takes a snapshot of the current token balance. Afterwards it uses this number to calculate the payouts. If used with an ERC20 token, it is only temporary because someone can donate the ERC20 and make the contract whole. If the attacker uses nativeMatic then it's impossible to fix because funding isn't allowed after close and the receive function always reverts.

To exploit this an adversary can make a deposit for a token that has a current balance of zero using a expiration of 1 second. After the competition closes they refund their deposit. Now when the contract tries to give payouts to the winners it will try to payout a token that it no longer has any of, causing it to revert anytime someone tries to claim their award.

## Vulnerability Detail

## Impact

## Code Snippet

## Tool used

Manual Review

## Recommendation
